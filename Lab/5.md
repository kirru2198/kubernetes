 Tasks To Be Performed:
 1. Use the previous deployment
 2. Deploy an NGINX deployment of 3 replicas
 3. Create an NGINX service of type ClusterIP
 4. Create an ingress service/ Apache to Apache service/ NGINX to NGINX service

---

Here‚Äôs a **detailed, step-by-step solution** to your Kubernetes assignment involving **NGINX deployments**, **ClusterIP services**, and **Ingress configuration**.

---

## üßæ **Assignment Tasks**

1. ‚úÖ Use the previous NGINX deployment
2. ‚úÖ Deploy a new NGINX deployment with 3 replicas
3. ‚úÖ Create a ClusterIP service for the NGINX deployment
4. ‚úÖ Create an **Ingress** (NGINX to NGINX or Apache to Apache service)

We'll go through each task with commands and YAML files.

---

## ‚úÖ **Task 1 & 2: Use or Create NGINX Deployment (3 Replicas)**

If you don't already have it, here's the YAML:

### üîπ `nginx-deployment.yaml`

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
```

Apply it:

```bash
kubectl apply -f nginx-deployment.yaml
```

---

## ‚úÖ **Task 3: Create ClusterIP Service for NGINX**

### üîπ `nginx-service.yaml`

```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: ClusterIP
```

Apply it:

```bash
kubectl apply -f nginx-service.yaml
```

Confirm it:

```bash
kubectl get svc nginx-service
```

---

## ‚úÖ **Task 4: Create an Ingress Resource (NGINX to NGINX)**

### üõ†Ô∏è **Before you begin: Install an Ingress Controller**

If you're using **Minikube**, enable NGINX ingress:

```bash
minikube addons enable ingress
```

If using bare metal or cloud, deploy NGINX Ingress manually (let me know if you need that method).

---

### üîπ `nginx-ingress.yaml`

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
  - host: nginx.local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx-service
            port:
              number: 80
```

Apply it:

```bash
kubectl apply -f nginx-ingress.yaml
```

---

### üß™ Test the Ingress

Edit your local `/etc/hosts` file and add this line:

```
<minikube_ip_or_cluster_node_ip> nginx.local
```

Get IP (if using Minikube):

```bash
minikube ip
```

Now open a browser and go to:

```
http://nginx.local
```

You should see the NGINX welcome page served via Ingress.

---

## ‚úÖ Summary of Files & Commands

### 1. Deploy NGINX with 3 replicas

```bash
kubectl apply -f nginx-deployment.yaml
```

### 2. Create ClusterIP service

```bash
kubectl apply -f nginx-service.yaml
```

### 3. Deploy Ingress

```bash
kubectl apply -f nginx-ingress.yaml
```

### 4. Edit `/etc/hosts` (on your PC):

```
<cluster-node-ip> nginx.local
```

### 5. Visit in browser:

```
http://nginx.local
```

---
