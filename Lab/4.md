 Tasks To Be Performed:
 1. Use the previous deployment
 2. Change the service type to ClusterIP

---
Here‚Äôs a **detailed step-by-step solution** to change your existing **NGINX service from NodePort to ClusterIP** in Kubernetes:

---

## üßæ **Assignment Tasks Breakdown**

### ‚úÖ Task 1: Use the previous NGINX deployment

### ‚úÖ Task 2: Change the associated service type to **ClusterIP**

---

## üîç Understanding the Service Types

* **NodePort**: Exposes the service on a static port on each Node (used for external access).
* **ClusterIP** *(default)*: Makes the service accessible only inside the Kubernetes cluster (internal communication between pods/services).

You are now being asked to **change it from NodePort to ClusterIP**.

---

## ‚úÖ Step-by-Step Instructions

### üõ†Ô∏è Step 1: Check the current service type

First, verify the existing service:

```bash
kubectl get svc nginx-nodeport
```

Output should show something like:

```
NAME             TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
nginx-nodeport   NodePort   10.96.127.10    <none>        80:30080/TCP   20m
```

---

### üõ†Ô∏è Step 2: Delete the existing NodePort service

You cannot directly **edit** the type of a service once it is created. So you must delete and re-create it.

```bash
kubectl delete svc nginx-nodeport
```

---

### üõ†Ô∏è Step 3: Create a new service of type ClusterIP

You can either create it using a YAML file or with `kubectl expose`.

---

#### ‚úÖ Option A: Create via YAML

Create a file called `nginx-clusterip-service.yaml`:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-clusterip
spec:
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: ClusterIP
```

Apply it:

```bash
kubectl apply -f nginx-clusterip-service.yaml
```

---

#### ‚úÖ Option B: Create via `kubectl expose`

```bash
kubectl expose deployment nginx-deployment \
  --name=nginx-clusterip \
  --port=80 \
  --target-port=80 \
  --type=ClusterIP
```

---

### üõ†Ô∏è Step 4: Verify the new service

```bash
kubectl get svc nginx-clusterip
```

Expected output:

```
NAME               TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE
nginx-clusterip    ClusterIP   10.96.200.11   <none>        80/TCP    1m
```

This confirms the service is now only accessible within the cluster (by other pods or services).

---

## ‚úÖ Summary of Commands

```bash
# Delete existing NodePort service
kubectl delete svc nginx-nodeport

# Create new ClusterIP service
kubectl expose deployment nginx-deployment \
  --name=nginx-clusterip \
  --port=80 \
  --target-port=80 \
  --type=ClusterIP

# Verify service
kubectl get svc nginx-clusterip
```

---

## üí° Tip: Test ClusterIP Inside the Cluster

To test access to the service from within the cluster:

```bash
kubectl run test-pod --image=nginx --rm -it -- bash
apt update && apt install curl -y
curl http://nginx-clusterip
```
